# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.
<% if @logging %>
[logging]
<% @logging.each do |k, v| %>
 <%= k %> = <%= v %>
<% end %>
<% end %>

<% if @libdefaults %>
[libdefaults]
<% @libdefaults.each do |k, v| %>
 <% if k == 'default_realm' %>
  <% v = v.upcase %>
 <% end %>
 <%= k %> = <%= v %>
<% end %>
<% end %>

<% if @realms %>
[realms]
 <% unless node['krb5']['krb5_conf']['realms']['default_realm_kdcs'].empty? -%>
 <%= node['krb5']['krb5_conf']['realms']['default_realm'].upcase %> = {
  <% node['krb5']['krb5_conf']['realms']['default_realm_kdcs'].each do |kdc_server| -%>
  kdc = <%= kdc_server %>
  <% end -%>
  <% unless node['krb5']['krb5_conf']['realms']['default_realm_admin_server'].empty? -%>
  admin_server = <%=  node['krb5']['krb5_conf']['realms']['default_realm_admin_server'] %>
  <% end %>
 }
 <% end -%>

 <% node['krb5']['krb5_conf']['realms']['realms'].each do |krb5_realm| -%>
 <%= krb5_realm.downcase -%> = <%= krb5_realm.upcase %>
 .<%= krb5_realm.downcase -%> = <%= krb5_realm.upcase %>
 <% end -%>
<% end %>

<% if @appdefaults %>
[appdefaults]
<% @appdefaults.each do |app, h| %>
 <%= app %> = {
  <% h.each do |k, v| %>
   <%= k %> = <%= v %>
  <% end %>
 }
<% end %>
<% end %>
